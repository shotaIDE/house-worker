# 商用リリースアプリのデバッグ機能表示問題解消要件定義

## 1. 概要

商用リリースアプリにおいて、以下のデバッグ機能が表示されている問題を解消する必要がある：

- 設定画面にデバッグ画面への動線が表示されている
- 右上にバナーが表示されている

## 2. 現状分析

### 2.1 設定画面のデバッグ動線

- 現在、`SettingsScreen`クラス内の`build`メソッドで、デバッグセクションとデバッグ画面への動線が表示されている
- `_buildDebugTile`メソッドによって、デバッグ画面へのナビゲーションが実装されている
- このタイルは全ての環境（開発環境、本番環境）で表示されている

### 2.2 右上のバナー表示

- 現在、アプリの右上に 2 種類のバナーが表示される可能性がある：
  1. Flutter のデバッグバナー（`debugShowCheckedModeBanner`で制御）
  2. カスタムアプリバナー（`showCustomAppBanner`で制御）
- バナー表示の制御は`app_feature.dart`で定義されている変数によって行われている：
  - `showCustomAppBanner`: 本番環境またはプロファイル/リリースモードの場合に`true`
  - `showAppDebugBanner`: `showCustomAppBanner`が`false`の場合に`true`
- 環境（Flavor）は`flavor.dart`で定義されており、環境変数`FLUTTER_APP_FLAVOR`から決定される

## 3. 要件

### 3.1 設定画面のデバッグ動線非表示化

- 本番環境（`Flavor.prod`）のリリースモードでは、設定画面からデバッグセクションとデバッグ画面への動線を完全に非表示にする
- 本番環境（`Flavor.prod`）のプロファイルモードとデバッグモード、開発環境（`Flavor.dev`）とエミュレータ環境（`Flavor.emulator`）では、引き続きデバッグセクションとデバッグ画面への動線を表示する

### 3.2 右上のバナー非表示化

- 本番環境（`Flavor.prod`）のリリースモードでは、右上のバナー（デバッグバナーとカスタムアプリバナーの両方）を完全に非表示にする
- 本番環境（`Flavor.prod`）のプロファイルモードとデバッグモード、開発環境（`Flavor.dev`）とエミュレータ環境（`Flavor.emulator`）では、引き続きカスタムアプリバナーを表示する

## 4. 非機能要件

### 4.1 互換性

- 既存のデバッグ機能自体は削除せず、表示制御のみを変更する
- 開発環境とエミュレータ環境では、デバッグ機能へのアクセスを維持する

### 4.2 保守性

- 環境による表示/非表示の制御は、既存の`Flavor`列挙型を活用する
- コードの変更は最小限に抑え、既存のアーキテクチャを尊重する

## 5. 検証基準

### 5.1 設定画面のデバッグ動線

- 本番環境でアプリを起動し、設定画面を開いた際にデバッグセクションとデバッグ画面への動線が表示されないことを確認
- 開発環境とエミュレータ環境でアプリを起動し、設定画面を開いた際にデバッグセクションとデバッグ画面への動線が表示されることを確認

### 5.2 右上のバナー

- 本番環境でアプリを起動した際に、右上にバナーが表示されないことを確認
- 開発環境とエミュレータ環境でアプリを起動した際に、右上にカスタムアプリバナーが表示されることを確認

## 6. 影響範囲

- `client/lib/ui/feature/settings/settings_screen.dart`
- `client/lib/data/definition/app_feature.dart`
- `client/lib/ui/root_app.dart`

## 7. リスク

- バナー表示の変更により、開発者が本番環境と開発環境を視覚的に区別しづらくなる可能性がある
- デバッグ機能へのアクセスが制限されることで、本番環境でのトラブルシューティングが困難になる可能性がある
