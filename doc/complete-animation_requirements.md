# 家事完了時のアニメーション要件定義

## 概要

ホーム画面の家事タブにおいて、ユーザーが家事を完了した時の視覚的フィードバックを改善するためのアニメーション要件を定義します。このアニメーションにより、ユーザーは家事が完了したことをより明確に認識できるようになります。

## 背景

現在、ユーザーが家事を完了すると、以下の処理が行われます：

1. 家事アイテムの完了ボタン（丸枠の完了アイコン）がタップされる
2. WorkLogService を通じて家事ログが記録される
3. 成功時にはスナックバーで「家事を記録しました」と表示される

しかし、この視覚的フィードバックは最小限であり、ユーザーにとって家事完了の瞬間がわかりにくい状態です。

## 要件

### 1. 完了アイコンのアニメーション

#### 現状

- 現在、家事アイテムの完了ボタンには `Icons.check_circle_outline` が使用されている
- ユーザーがタップしても、アイコンの見た目は変化しない

#### 要件詳細

- ユーザーが完了ボタンをタップした時、以下のアニメーションを実行する：
  1. 現在の丸枠の完了アイコン（`Icons.check_circle_outline`）から丸枠塗りつぶし完了アイコン（`Icons.check_circle`）に変化させる
  2. 一定時間（300 ミリ秒）後に、再び丸枠の完了アイコン（`Icons.check_circle_outline`）に戻す
- アニメーションはスムーズな遷移を実現するため、フェードエフェクトを使用する
- アイコンの色は、緑色を使用する

#### 技術的考慮事項

- `AnimatedSwitcher` または `AnimatedCrossFade` ウィジェットを使用してアイコン間の遷移をアニメーション化する
- アニメーションの状態管理には、一時的な状態変数を使用する
- アニメーションは家事完了処理の成功後に実行する

### 2. ログ一覧タブのハイライト

#### 現状

- 現在、家事が完了してもログ一覧タブには視覚的な変化がない
- ユーザーは手動でログ一覧タブに切り替えて、新しく追加されたログを確認する必要がある

#### 要件詳細

- ユーザーが家事を完了した時、以下のアニメーションを実行する：
  1. ログ一覧タブ（TabBar の 2 番目のタブ）を一瞬ハイライトする
  2. ハイライトは、タブの背景色を一時的に強調色（primaryColor）の薄い色（例：primaryColor.withAlpla(100)）に変更する
  3. ハイライトは 500 ミリ秒間表示した後、元の色に戻す
- アニメーションはフェードイン・フェードアウトのエフェクトを使用する

#### 技術的考慮事項

- TabBar のタブをハイライトするには、カスタムの TabBar 実装またはオーバーレイを使用する
- アニメーションの状態管理には、StatefulWidget のステートを利用する
- ハイライトは家事完了処理の成功後に実行する

## 非機能要件

### パフォーマンス

- アニメーションはスムーズに実行され、UI のレスポンシブ性を損なわないこと
- アニメーション中もアプリの他の機能は通常通り操作可能であること

### アクセシビリティ

- アニメーションは、アクセシビリティ設定（アニメーション削減など）に従うこと
- 視覚的なフィードバックだけでなく、触覚フィードバック（バイブレーション）も提供すること

### 互換性

- アニメーションは、サポートされているすべてのデバイスと OS（iOS/Android）で一貫して動作すること

## ユーザー体験の向上

このアニメーションの実装により、以下のユーザー体験の向上が期待されます：

1. 家事完了時の視覚的フィードバックが強化され、ユーザーの行動に対する確認が明確になる
2. ログ一覧タブのハイライトにより、新しく記録された家事ログの存在をユーザーに知らせる
3. アプリ全体の反応性と生き生きとした感覚が向上する

## 制約事項

- アニメーションは過度に派手であってはならず、アプリの全体的なデザイン言語と一致すること
- アニメーションによってアプリのパフォーマンスが著しく低下しないこと
- 既存のコードベースとの互換性を維持すること

## 関連コンポーネント

実装に関連する主要なコンポーネントは以下の通りです：

- `HouseWorkItem` - 家事アイテムを表示するウィジェット
- `HouseWorksTab` - 家事一覧を表示するタブ
- `WorkLogsTab` - 完了した家事ログを表示するタブ
- `HomeScreen` - タブを含むホーム画面
- `house_works_presenter.dart` - 家事タブのプレゼンター
- `work_log_service.dart` - 家事ログの記録を処理するサービス
